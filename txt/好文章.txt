/***************20:00 2018/7/9***********
【表结构】
分类表  分类id   分类名称
用户表   用户id  昵称   密码  
文章表  文章id   标题   分类id   内容  用户 创建时间 (评论列表)
评论表   评论id  内容   评论时间   文章id  用户id 
收藏表	收藏id	文章列表	用户id

【关系】
文章-分类  多对一  一对多
文章-用户  多对一  一对多
文章-评论  一对多  多对一  级联删除
用户-评论  一对多  多对一
文章-收藏  多对一	级联更新

【前台页面】
首页1
登陆23:30 2018/8/14
注册23:30 2018/8/14
文章列表1
文章详细1
编辑文章1
发布文章1

【功能】
下拉刷新：ajax获取指定用户的所有文章，随机
游客功能：
	获取所有
	根据分类获取

会员功能：
	评论：评论表	根据文章id获取所有评论内容
	收藏：收藏表	根据用户查找收藏列表	根据用户判断文章是否收藏
	管理：文章编辑/删除，收藏删除（详细页面上做）
	根据用户获取
	根据用户和收藏获取
	根据用户和开始结束时间获取
	根据用户、时间、分类获取文章列表

**************问题和解决*************
【无文章的分类，分页数码错误】

【控制器接受不了pojo套pojo，如Comment中Article】

【拦截器拦截不了ajax请求，没登陆评论的情况】

【跳转到login，没有跳回来】

【deleteMapping传递不了ajax中data数据】
使用type:post方式，在data中_method:"delete"即可


/***************thymeleaf************
th:href="{@|地址（或${}）|}"
th:text="${}"	替换文本内容
th:utext="${}"	替换html内容
th:onclick="'javascript:openBox(\''+${article.articleId}+'\')'"	执行带参函数
th:class="${pageNo eq articles?.number}?'active':'waves-effect'" 三元表达式
th:each="pageNo:${#numbers.sequence(0, articles?.totalPages-1)}" 指定循环次数
${Object?.value}	可传递null值



**************Jquery*************
contains('text'):内容选择器，选择包含text文本的元素或子元素

/***************springDATA+JPA*******
1.配置数据源
2.配置EntityManagerFactory
3.配置事务管理器
4.配置支持注解的事务
5.配置springdata

【Repository接口定义】
方式1：继承Repository<实体, 主键>接口
Repository接口:空接口，标记接口，没有包含方法声明的接口
方式2：@RepositoryDefinition(domainClass=实体.class,idClass=主键.class)

【查询方法规则】
name like ?% and age<?
findByNameStartingWithAndAgeLessThan

name like %? and age=?
findByNameEndingWithAndAgeEquals

name in (?,?,..) and age<?
findByNameInOrAgeLessThan

findArticleByUserAndCreateTimeBetweenOrderByCreateTimeDesc(user,date1,date2)	//根据用户和开始结束时间

【@Query注解】自定义查询
占位符1:
    @Query("select e from Employee e WHERE e.name = ?1 and e.age = ?2")
    public List<Employee> getByNameAndAge(String name,Integer age);
占位符2:
	@Query("select e from Employee e WHERE e.name=:name and e.age =:age")
	public List<Employee> getByNameAndAge2(@Param("name") String name, @Param("age") Integer age);
开启原始sql语句(表名为数据库表名)：
【事务】
1)事务一般在Service层使用（一个Service可能有多个dao的调用)
2）@Query,@Modifying,@Transactional结合使用
【Repository子接口】
1)CrudRepository:继承Repository,实现crud方法
2)PagingAndSortingRepository:继承CrudRepository，实现分页和排序
3)JpaRepository:继承PagingAndSortingRepository，实现jpa规范相关方法
【JpaSpecificationExecutor接口】
封装了JPA Criteria查询条件

/*******Hibernate关联映射注解*****
【@OneToOne】一对一的关系，只需在主控方（数据总表）内注明@OneToOne
【OneToMany和@ManyToOne】只需在被控方写mappedBy,其值为主控方中引用的外键对象的名称
【关联注解的属性】
1)fetch属性是该实体的加载方式
fetch=FetchType.LAZY为默认的数据延迟加载
fetch=FetchType.EAGER为急加载。
2)cascade属性表示与此实体一对一关联的实体的级联样式类型
CascadeType.PERSIST级联新增（又称级联保存）； 
CascadeType.MERGE:级联合并（级联更新）； 
CascadeType.REMOVE:级联删除； 
CascadeType.REFRESH:级联刷新 ；
CascadeType.ALL:全级联； 
3)mapperBy属性:指关系被维护端，双向关联必须设置此属性，因为双向关联只能交给一方去控制
【@JoinColumn】保存表与表之间关系的字段，被控方对应的主键，默认name = 关联表的名称+”-“+关联表主键的字段名

-------------SimpleDateFormat------
设置指定格式的日期对象
SimpleDateFormat sdf = new SimpleDateFormat("yyyy-M-dd");
Date date = sdf.parse("2018-7-1");


-------------遇到的问题-------------
//根据分类查找文章		 	 文章表的分类对象    分类表主键 
SELECT a FROM Category c ,Article a WHERE a.category =   c.categoryId  and c.categoryName = 'java' 
【ajax提交失败】
将提交按钮botton放在form表单外面，奇迹发生了
【yml文件】
idea不识别yml文件：1没装插件2设置中File Types把yml识别为text了
yml文件从其他项目拷贝，编码不一样导致无法识别




